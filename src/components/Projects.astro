---
// src/components/Projects.astro
import ProjectCard from './ProjectCard.astro';
import { projects } from '../data/projects';
---

<section id="projects" class="py-20">
  <div class="container mx-auto px-6">
    <h2 class="text-3xl font-bold text-center mb-12 scroll-animate">代表项目</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto">
      {projects.map((project, index) => (
        <div class={`scroll-animate stagger-${Math.min(index + 1, 6)}`}>
          <ProjectCard id={project.id} title={project.title} description={project.description} tech={project.tech} metrics={project.metrics} />
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  // Intersection Observer 滚动动画
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.scroll-animate').forEach((el) => {
    observer.observe(el);
  });
</script>
